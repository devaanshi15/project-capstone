<app-navbar></app-navbar>

<div class="container">
  <h2>Resume Upload</h2>

  <form (ngSubmit)="onSubmit()" #resumeForm="ngForm" enctype="multipart/form-data">
    <label>
      Candidate Name:
      <input type="text" name="candidateName" [(ngModel)]="candidateName" [readonly]="!isHrAdmin" required />
    </label>

    <label>
      Select Job Description:
      <select name="jobId" [(ngModel)]="selectedJobId" (change)="onJobChange()" required>
        <option value="" disabled>Select a job</option>
        <option *ngFor="let job of jobs" [value]="job._id">{{ job.title }}</option>
      </select>
    </label>

    <div *ngIf="selectedJob">
      <a (click)="viewJD()" style="text-decoration: underline; cursor: pointer;">
        Read full JD: {{ selectedJob.title }}
      </a>
    </div>

    <label>
      Upload Resume:
      <input type="file" (change)="onFileSelected($event)" [required]="!isHrAdmin" />
    </label>

    <div *ngIf="isHrAdmin">
      <button type="button" (click)="uploadResume()" [disabled]="!canUpload()">Upload</button>
      <p *ngIf="uploadMessage" style="color:green;">{{ uploadMessage }}</p>
      <button type="button" (click)="onAiButtonClick()">AI Button</button>
    </div>

    <div *ngIf="!isHrAdmin">
      <button type="submit" [disabled]="!canSubmit()">Submit</button>
      <p *ngIf="submitMessage" style="color:green;">{{ submitMessage }}</p>
    </div>
  </form>
</div>
